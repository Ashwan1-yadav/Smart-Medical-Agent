<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes bounce-dots {

            0%,
            80%,
            100% {
                transform: scale(0);
                opacity: 0.5;
            }

            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .typing-dot {
            animation: bounce-dots 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0s;
        }
    </style>
</head>

<body class="bg-slate-50 antialiased">

    <div class="flex h-screen overflow-hidden">

        <!-- Sidebar -->
        <aside id="sidebar"
            class="w-72 bg-white border-r border-slate-200 flex flex-col flex-shrink-0 transition-all duration-300 lg:relative absolute inset-y-0 left-0 z-50 transform lg:transform-none -translate-x-full lg:translate-x-0">

            <!-- Logo -->
            <div class="flex items-center space-x-3 px-6 py-5 border-b border-slate-200">
                <div
                    class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center shadow-lg shadow-emerald-500/30">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </div>
                <span class="text-xl font-bold text-slate-900">MediAgent</span>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="/dashboard"
                    class="flex items-center space-x-3 px-4 py-3 bg-emerald-50 text-emerald-700 rounded-xl font-medium transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                    </svg>
                    <span>Chat Assistant</span>
                </a>

                <a href="#"
                    class="flex items-center space-x-3 px-4 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-medium transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span>History</span>
                </a>

                <a href="#"
                    class="flex items-center space-x-3 px-4 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-medium transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
                    </svg>
                    <span>Saved Items</span>
                </a>

                <a href="#"
                    class="flex items-center space-x-3 px-4 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-medium transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <span>Settings</span>
                </a>
            </nav>

            <!-- User Profile -->
            <div class="px-4 py-4 border-t border-slate-200">
                <div class="flex items-center space-x-3 p-3 rounded-xl bg-slate-50">
                    <div
                        class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="text-sm font-semibold text-slate-900 truncate">Guest User</div>
                        <div class="text-xs text-slate-500">Online</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col overflow-hidden">

            <!-- Header -->
            <header class="bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <!-- Mobile Menu Toggle -->
                    <button id="menuToggle" class="lg:hidden p-2 rounded-lg hover:bg-slate-100 transition-colors">
                        <svg class="w-6 h-6 text-slate-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>

                    <h1 class="text-2xl font-bold text-slate-900">Medical Assistant</h1>
                </div>

                <div class="flex items-center space-x-3">
                    <!-- Notification Button -->
                    <button class="p-2 rounded-lg hover:bg-slate-100 transition-colors relative">
                        <svg class="w-5 h-5 text-slate-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                        </svg>
                        <span class="absolute top-1 right-1 w-2 h-2 bg-emerald-500 rounded-full"></span>
                    </button>

                    <!-- Back to Home -->
                    <a href="/"
                        class="px-4 py-2 text-sm font-semibold text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition-all">
                        Back to Home
                    </a>
                </div>
            </header>

            <!-- Chat Area -->
            <div class="flex-1 overflow-y-auto px-4 py-6" id="chatArea">

                <!-- Welcome Screen -->
                <div id="welcomeScreen" class="max-w-4xl mx-auto text-center py-12">

                    <!-- Icon -->
                    <div
                        class="w-20 h-20 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-8 shadow-xl shadow-emerald-500/30">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                    </div>

                    <h2 class="text-3xl font-bold text-slate-900 mb-4">Welcome to Your Medical Assistant</h2>
                    <p class="text-lg text-slate-600 mb-12 max-w-2xl mx-auto">
                        Ask me about your symptoms and I'll provide medical insights and recommendations
                    </p>

                    <!-- Suggestion Cards -->
                    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4 max-w-5xl mx-auto">

                        <button
                            class="suggestion-btn group p-6 bg-white border-2 border-slate-200 rounded-xl hover:border-emerald-500 hover:shadow-lg transition-all text-left"
                            data-query="I have a fever">
                            <div
                                class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                </svg>
                            </div>
                            <span class="font-semibold text-slate-900">I have a fever</span>
                        </button>

                        <button
                            class="suggestion-btn group p-6 bg-white border-2 border-slate-200 rounded-xl hover:border-blue-500 hover:shadow-lg transition-all text-left"
                            data-query="What to do for headache?">
                            <div
                                class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                </svg>
                            </div>
                            <span class="font-semibold text-slate-900">Headache relief</span>
                        </button>

                        <button
                            class="suggestion-btn group p-6 bg-white border-2 border-slate-200 rounded-xl hover:border-purple-500 hover:shadow-lg transition-all text-left"
                            data-query="I have a cough">
                            <div
                                class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                                </svg>
                            </div>
                            <span class="font-semibold text-slate-900">Cough treatment</span>
                        </button>

                        <button
                            class="suggestion-btn group p-6 bg-white border-2 border-slate-200 rounded-xl hover:border-amber-500 hover:shadow-lg transition-all text-left"
                            data-query="Medicine for common cold">
                            <div
                                class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                                </svg>
                            </div>
                            <span class="font-semibold text-slate-900">Common cold</span>
                        </button>

                    </div>
                </div>

                <!-- Messages Container -->
                <div id="messages" class="max-w-4xl mx-auto space-y-6"></div>

                <!-- Typing Indicator -->
                <div id="typingIndicator" class="hidden max-w-4xl mx-auto">
                    <div class="flex items-start space-x-3">
                        <div
                            class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center flex-shrink-0">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                            </svg>
                        </div>
                        <div
                            class="flex items-center space-x-3 bg-white px-6 py-4 rounded-2xl border border-slate-200 shadow-sm">
                            <div class="flex space-x-2">
                                <div class="w-2 h-2 bg-emerald-500 rounded-full typing-dot"></div>
                                <div class="w-2 h-2 bg-emerald-500 rounded-full typing-dot"></div>
                                <div class="w-2 h-2 bg-emerald-500 rounded-full typing-dot"></div>
                            </div>
                            <span class="text-sm text-slate-600">Assistant is thinking...</span>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Input Area -->
            <div class="bg-white border-t border-slate-200 px-6 py-4">
                <div class="max-w-4xl mx-auto">

                    <!-- Input Container -->
                    <div
                        class="flex items-end space-x-3 bg-slate-100 border-2 border-slate-200 rounded-2xl p-3 focus-within:border-emerald-500 transition-colors">
                        <textarea id="messageInput" rows="1"
                            placeholder="Describe your symptoms or ask a health question..."
                            class="flex-1 bg-transparent border-none outline-none resize-none text-slate-900 placeholder-slate-500 max-h-32"></textarea>

                        <button id="sendButton"
                            class="p-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl hover:shadow-lg hover:shadow-emerald-500/30 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                            </svg>
                        </button>
                    </div>

                    <!-- Disclaimer -->
                    <div class="flex items-center justify-center space-x-2 mt-3 text-xs text-slate-500">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span>This AI assistant provides general information. Always consult a healthcare professional
                            for medical advice.</span>
                    </div>

                </div>
            </div>

        </main>

    </div>

    <!-- Overlay for mobile sidebar -->
    <div id="overlay" class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"></div>

    <script>
        // DOM Elements
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const messagesContainer = document.getElementById('messages');
        const welcomeScreen = document.getElementById('welcomeScreen');
        const typingIndicator = document.getElementById('typingIndicator');
        const chatArea = document.getElementById('chatArea');
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        // State
        let isProcessing = false;
        let conversationHistory = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
            autoResizeTextarea();
        });

        // Setup Event Listeners
        function setupEventListeners() {
            // Send message on button click
            sendButton.addEventListener('click', handleSendMessage);

            // Send message on Enter (Shift+Enter for new line)
            messageInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage();
                }
            });

            // Auto-resize textarea
            messageInput.addEventListener('input', autoResizeTextarea);

            // Suggestion cards
            document.querySelectorAll('.suggestion-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const query = btn.dataset.query;
                    messageInput.value = query;
                    handleSendMessage();
                });
            });

            // Mobile menu toggle
            if (menuToggle) {
                menuToggle.addEventListener('click', toggleSidebar);
            }

            if (overlay) {
                overlay.addEventListener('click', toggleSidebar);
            }
        }

        // Toggle Sidebar (Mobile)
        function toggleSidebar() {
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }

        // Auto-resize textarea
        function autoResizeTextarea() {
            messageInput.style.height = 'auto';
            messageInput.style.height = Math.min(messageInput.scrollHeight, 128) + 'px';
        }

        // Handle Send Message
        async function handleSendMessage() {
            const message = messageInput.value.trim();

            if (!message || isProcessing) return;

            isProcessing = true;
            sendButton.disabled = true;

            // Hide welcome screen
            if (welcomeScreen && !welcomeScreen.classList.contains('hidden')) {
                welcomeScreen.classList.add('hidden');
            }

            // Clear input
            messageInput.value = '';
            messageInput.style.height = 'auto';

            // Add user message to UI
            addMessage(message, 'user');

            // Add to conversation history
            conversationHistory.push({ role: 'user', message });

            // Show typing indicator
            showTypingIndicator();

            try {
                // Call API
                const response = await fetch('/api/ask', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ question: message })
                });

                const data = await response.json();

                // Hide typing indicator
                hideTypingIndicator();

                if (response.ok) {
                    // Parse and display response
                    addMessage(data.response, 'assistant', data.type);
                    conversationHistory.push({ role: 'assistant', message: data.response });
                } else {
                    addMessage('Sorry, I encountered an error. Please try again.', 'assistant', 'error');
                }

            } catch (error) {
                hideTypingIndicator();
                console.error('Error:', error);
                addMessage('Sorry, I couldn\'t connect to the server. Please check your connection.', 'assistant', 'error');
            } finally {
                isProcessing = false;
                sendButton.disabled = false;
                messageInput.focus();
            }
        }

        // Add Message to UI
        function addMessage(text, role, type = 'general') {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3 animate-fadeIn';

            if (role === 'user') {
                messageDiv.innerHTML = `
      <div class="w-10 h-10 bg-slate-200 rounded-xl flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-slate-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
        </svg>
      </div>
      <div class="flex-1 bg-slate-100 px-6 py-4 rounded-2xl rounded-tl-sm">
        <p class="text-slate-900 whitespace-pre-wrap leading-relaxed">${escapeHtml(text)}</p>
      </div>
    `;
            } else {
                const isPrescription = type === 'prescription' || text.includes('Recommended Medicine') || text.includes('Adult Dosage');

                messageDiv.innerHTML = `
      <div class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
        </svg>
      </div>
      <div class="flex-1 bg-white border border-slate-200 px-6 py-4 rounded-2xl rounded-tl-sm shadow-sm">
        ${isPrescription ? formatPrescription(text) : `<p class="text-slate-900 whitespace-pre-wrap leading-relaxed">${escapeHtml(text)}</p>`}
      </div>
    `;
            }

            messagesContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        // Format Prescription Response
        function formatPrescription(text) {
            const lines = text.split('\n').filter(line => line.trim());

            let html = '<div class="space-y-4">';

            lines.forEach(line => {
                const trimmedLine = line.trim();

                if (trimmedLine.startsWith('For ')) {
                    html += `<div class="flex items-center space-x-2 text-emerald-700 font-semibold mb-3">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span>${escapeHtml(trimmedLine)}</span>
      </div>`;
                } else if (trimmedLine.includes(':')) {
                    const [label, value] = trimmedLine.split(':').map(s => s.trim());
                    html += `
        <div class="p-4 bg-emerald-50 border border-emerald-100 rounded-xl">
          <div class="font-semibold text-slate-900 mb-1">${escapeHtml(label)}</div>
          <div class="text-slate-700">${escapeHtml(value)}</div>
        </div>
      `;
                } else {
                    html += `<p class="text-slate-700">${escapeHtml(trimmedLine)}</p>`;
                }
            });

            html += '</div>';

            // Add disclaimer
            html += `
    <div class="mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start space-x-3">
      <svg class="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
      </svg>
      <div class="text-sm text-amber-800">
        <strong>Important:</strong> This is general information. Please consult a licensed healthcare professional before taking any medication.
      </div>
    </div>
  `;

            return html;
        }

        // Show/Hide Typing Indicator
        function showTypingIndicator() {
            typingIndicator.classList.remove('hidden');
            scrollToBottom();
        }

        function hideTypingIndicator() {
            typingIndicator.classList.add('hidden');
        }

        // Scroll to Bottom
        function scrollToBottom() {
            setTimeout(() => {
                chatArea.scrollTo({
                    top: chatArea.scrollHeight,
                    behavior: 'smooth'
                });
            }, 100);
        }

        // Escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out;
  }
`;
        document.head.appendChild(style);

        console.log('ðŸŽ¨ Medical Agent Dashboard Loaded');
    </script>

</body>

</html>